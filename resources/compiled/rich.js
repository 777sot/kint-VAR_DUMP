void 0===window.kintRich&&(window.kintRich=function(){"use strict";var s={selectText:function(e){var t=window.getSelection(),a=document.createRange();a.selectNodeContents(e.lastChild),a.setStart(e.firstChild,0),t.removeAllRanges(),t.addRange(a)},each:function(e,t){Array.prototype.slice.call(document.querySelectorAll(e),0).forEach(t)},hasClass:function(e,t){return!!e.classList&&(void 0===t&&(t="kint-show"),e.classList.contains(t))},addClass:function(e,t){void 0===t&&(t="kint-show"),e.classList.add(t)},removeClass:function(e,t){return void 0===t&&(t="kint-show"),e.classList.remove(t),e},toggle:function(e,t){var a=s.getChildren(e);a&&(void 0===t&&(t=s.hasClass(e)),t?s.removeClass(e):s.addClass(e),1===a.childNodes.length&&(a=a.childNodes[0].childNodes[0])&&s.hasClass(a,"kint-parent")&&s.toggle(a,t))},toggleChildren:function(e,t){var a=s.getChildren(e);if(a){var o=a.getElementsByClassName("kint-parent"),r=o.length;for(void 0===t&&(t=!s.hasClass(e));r--;)s.toggle(o[r],t)}},toggleAll:function(e){for(var t=document.getElementsByClassName("kint-parent"),a=t.length,o=!s.hasClass(e.parentNode);a--;)s.toggle(t[a],o)},switchTab:function(e){var t,a=e.previousSibling,o=0;for(e.parentNode.getElementsByClassName("kint-active-tab")[0].className="",e.className="kint-active-tab";a;)1===a.nodeType&&o++,a=a.previousSibling;t=e.parentNode.nextSibling.childNodes;for(var r=0;r<t.length;r++)r===o?(t[r].style.display="block",1===t[r].childNodes.length&&(a=t[r].childNodes[0].childNodes[0])&&s.hasClass(a,"kint-parent")&&s.toggle(a,!1)):t[r].style.display="none"},mktag:function(e){return"<"+e+">"},openInNewWindow:function(e){var t=window.open();t&&(t.document.open(),t.document.write(s.mktag("html")+s.mktag("head")+s.mktag("title")+"Kint ("+(new Date).toISOString()+")"+s.mktag("/title")+s.mktag('meta charset="utf-8"')+document.getElementsByClassName("kint-script")[0].outerHTML+document.getElementsByClassName("kint-style")[0].outerHTML+s.mktag("/head")+s.mktag("body")+'<input style="width: 100%" placeholder="Take some notes!"><div class="kint-rich">'+e.parentNode.outerHTML+"</div>"+s.mktag("/body")),t.document.close())},sortTable:function(e,a){var t=e.tBodies[0];[].slice.call(e.tBodies[0].rows).sort(function(e,t){if(e=e.cells[a].textContent.trim().toLocaleLowerCase(),t=t.cells[a].textContent.trim().toLocaleLowerCase(),isNaN(e)||isNaN(t)){if(isNaN(e)&&!isNaN(t))return 1;if(isNaN(t)&&!isNaN(e))return-1}else e=parseFloat(e),t=parseFloat(t);return e<t?-1:t<e?1:0}).forEach(function(e){t.appendChild(e)})},showAccessPath:function(e){for(var t=e.childNodes,a=0;a<t.length;a++)if(s.hasClass(t[a],"access-path"))return void(s.hasClass(t[a],"kint-show")?s.removeClass(t[a]):(s.addClass(t[a]),s.selectText(t[a])))},getParentByClass:function(e,t){for(void 0===t&&(t="kint-rich");(e=e.parentNode)&&!s.hasClass(e,t););return e},getParentHeader:function(e,t){for(var a=e.nodeName.toLowerCase();"dd"!==a&&"dt"!==a&&s.getParentByClass(e);)a=(e=e.parentNode).nodeName.toLowerCase();return s.getParentByClass(e)?("dd"===a&&t&&(e=e.previousElementSibling),e&&"dt"===e.nodeName.toLowerCase()&&s.hasClass(e,"kint-parent")?e:void 0):null},getChildren:function(e){for(;(e=e.nextElementSibling)&&"dd"!==e.nodeName.toLowerCase(););return e},keyboardNav:{targets:[],target:0,active:!1,fetchTargets:function(){s.keyboardNav.targets=[],s.each(".kint-rich nav, .kint-tabs>li:not(.kint-active-tab)",function(e){0===e.offsetWidth&&0===e.offsetHeight||s.keyboardNav.targets.push(e)})},sync:function(e){var t=document.querySelector(".kint-focused");if(t&&s.removeClass(t,"kint-focused"),s.keyboardNav.active){var a=s.keyboardNav.targets[s.keyboardNav.target];s.addClass(a,"kint-focused"),e||s.keyboardNav.scroll(a)}},scroll:function(e){var t=function(e){return e.offsetTop+(e.offsetParent?t(e.offsetParent):0)},a=t(e);if(s.folder){var o=s.folder.querySelector("dd.kint-folder");o.scrollTo(0,a-o.clientHeight/2)}else window.scrollTo(0,a-window.innerHeight/2)},moveCursor:function(e){for(s.keyboardNav.target+=e;s.keyboardNav.target<0;)s.keyboardNav.target+=s.keyboardNav.targets.length;for(;s.keyboardNav.target>=s.keyboardNav.targets.length;)s.keyboardNav.target-=s.keyboardNav.targets.length;s.keyboardNav.sync()},setCursor:function(e){s.keyboardNav.fetchTargets();for(var t=0;t<s.keyboardNav.targets.length;t++)if(e===s.keyboardNav.targets[t])return s.keyboardNav.target=t,!0;return!1}},mouseNav:{lastClickTarget:null,lastClickTimer:null,lastClickCount:0,renewLastClick:function(){window.clearTimeout(s.mouseNav.lastClickTimer),s.mouseNav.lastClickTimer=window.setTimeout(function(){s.mouseNav.lastClickTarget=null,s.mouseNav.lastClickTimer=null,s.mouseNav.lastClickCount=0},250)}},folder:null};return window.addEventListener("click",function(e){var t=e.target,a=t.nodeName.toLowerCase();if(s.mouseNav.lastClickTarget&&s.mouseNav.lastClickTimer&&s.mouseNav.lastClickCount)return t=s.mouseNav.lastClickTarget,1===s.mouseNav.lastClickCount?(s.toggleChildren(t.parentNode),s.keyboardNav.setCursor(t),s.keyboardNav.sync(!0),s.mouseNav.lastClickCount++,s.mouseNav.renewLastClick()):(s.toggleAll(t),s.keyboardNav.setCursor(t),s.keyboardNav.sync(!0),s.keyboardNav.scroll(t),window.clearTimeout(s.mouseNav.lastClickTimer),s.mouseNav.lastClickTarget=null,s.mouseNav.lastClickTarget=null,s.mouseNav.lastClickCount=0),!1;if(s.getParentByClass(t)){if("dfn"===a)s.selectText(t);else if("th"===a)return e.ctrlKey||s.sortTable(t.parentNode.parentNode.parentNode,t.cellIndex),!1;if((t=s.getParentHeader(t))&&(s.keyboardNav.setCursor(t.querySelector("nav")),s.keyboardNav.sync(!0)),t=e.target,"li"===a&&"kint-tabs"===t.parentNode.className)return"kint-active-tab"!==t.className&&s.switchTab(t),(t=s.getParentHeader(t,!0))&&(s.keyboardNav.setCursor(t.querySelector("nav")),s.keyboardNav.sync(!0)),!1;if("nav"===a)return"footer"===t.parentNode.nodeName.toLowerCase()?(s.keyboardNav.setCursor(t),s.keyboardNav.sync(!0),t=t.parentNode,s.hasClass(t)?s.removeClass(t):s.addClass(t)):(s.toggle(t.parentNode),s.keyboardNav.fetchTargets(),s.mouseNav.lastClickCount=1,s.mouseNav.lastClickTarget=t,s.mouseNav.renewLastClick()),!1;if(s.hasClass(t,"kint-popup-trigger")){var o=t.parentNode;if("footer"===o.nodeName.toLowerCase())o=o.previousSibling;else for(;o&&!s.hasClass(o,"kint-parent");)o=o.parentNode;s.openInNewWindow(o)}else{if(s.hasClass(t,"kint-access-path-trigger"))return s.showAccessPath(t.parentNode),!1;if("pre"===a&&3===e.detail)s.selectText(t);else if(s.getParentByClass(t,"kint-source")&&3===e.detail)s.selectText(s.getParentByClass(t,"kint-source"));else if(s.hasClass(t,"access-path"))s.selectText(t);else if("a"!==a)return(t=s.getParentHeader(t))&&(s.toggle(t),s.keyboardNav.fetchTargets()),!1}}},!1),window.onkeydown=function(e){if(e.target===document.body&&!e.altKey&&!e.ctrlKey){if(68===e.keyCode){if(s.keyboardNav.active)s.keyboardNav.active=!1;else if(s.keyboardNav.active=!0,s.keyboardNav.fetchTargets(),0===s.keyboardNav.targets.length)return s.keyboardNav.active=!1,!0;return s.keyboardNav.sync(),!1}if(!s.keyboardNav.active)return!0;if(9===e.keyCode)return s.keyboardNav.moveCursor(e.shiftKey?-1:1),!1;if(38===e.keyCode||75===e.keyCode)return s.keyboardNav.moveCursor(-1),!1;if(40===e.keyCode||74===e.keyCode)return s.keyboardNav.moveCursor(1),!1;var t=s.keyboardNav.targets[s.keyboardNav.target];if("li"===t.nodeName.toLowerCase()){if(32===e.keyCode||13===e.keyCode)return s.switchTab(t),s.keyboardNav.fetchTargets(),s.keyboardNav.sync(),!1;if(39===e.keyCode||76===e.keyCode)return s.keyboardNav.moveCursor(1),!1;if(37===e.keyCode||72===e.keyCode)return s.keyboardNav.moveCursor(-1),!1}if(t=t.parentNode,65===e.keyCode)return s.showAccessPath(t),!1;if("footer"===t.nodeName.toLowerCase()&&s.hasClass(t.parentNode,"kint-rich")){if(32===e.keyCode||13===e.keyCode)s.hasClass(t)?s.removeClass(t):s.addClass(t);else if(37===e.keyCode||72===e.keyCode)s.removeClass(t);else{if(39!==e.keyCode&&76!==e.keyCode)return!0;s.addClass(t)}return!1}if(32===e.keyCode||13===e.keyCode)return s.toggle(t),s.keyboardNav.fetchTargets(),!1;if(39===e.keyCode||76===e.keyCode||37===e.keyCode||72===e.keyCode){var a=37===e.keyCode||72===e.keyCode;if(s.hasClass(t))s.toggleChildren(t,a),s.toggle(t,a);else{if(a){var o=s.getParentHeader(t.parentNode.parentNode,!0);o&&(t=o,s.keyboardNav.setCursor(t.querySelector("nav")),s.keyboardNav.sync())}s.toggle(t,a)}return s.keyboardNav.fetchTargets(),!1}}},window.addEventListener("load",function(){if(s.folder=document.querySelector(".kint-rich.kint-folder"),s.folder){var e=document.querySelectorAll(".kint-rich.kint-folder");[].forEach.call(e,function(e){e===s.folder||e.parentNode.removeChild(e)});var t=s.folder.querySelector("dd"),a=document.querySelectorAll(".kint-rich");[].forEach.call(a,function(e){e!==s.folder&&(e.parentNode.removeChild(e),t.append(e))}),document.body.append(s.folder)}}),s}());
